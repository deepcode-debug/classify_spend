<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Browser Text Classifier</title>

  <script type="module">
    import { pipeline, env } from "https://cdn.jsdelivr.net/npm/@xenova/transformers";

    // IMPORTANT: load from local files ONLY
    env.allowLocalModels = true;
    env.allowRemoteModels = false;

    let classifier;

    async function loadModel() {
      document.getElementById("status").innerText = "Loading model...";

      classifier = await pipeline(
        "text-classification",
        "./model",   // local folder
        { quantized: true }
      );

      document.getElementById("status").innerText = "Model ready âœ…";
    }

    window.runClassification = async function () {
      const text = document.getElementById("input").value;
      if (!text) return;

      document.getElementById("result").innerText = "Running...";

      const output = await classifier(text);

      document.getElementById("result").innerText =
        output.map(o => `${o.label}: ${(o.score*100).toFixed(2)}%`).join("\n");
    };

    loadModel();
  </script>

  <style>
    body {
      font-family: Arial;
      max-width: 700px;
      margin: 40px auto;
    }

    textarea {
      width: 100%;
      height: 120px;
      padding: 10px;
      font-size: 16px;
    }

    button {
      margin-top: 10px;
      padding: 12px 20px;
      font-size: 16px;
      cursor: pointer;
    }

    #result {
      margin-top: 20px;
      font-weight: bold;
      white-space: pre-line;
    }
  </style>
</head>

<body>

<h2>Multilingual Text Classifier (ONNX in Browser)</h2>

<div id="status">Initializing...</div>

<textarea id="input" placeholder="Type text here..."></textarea>
<br>
<button onclick="runClassification()">Classify</button>

<div id="result"></div>

</body>
</html>